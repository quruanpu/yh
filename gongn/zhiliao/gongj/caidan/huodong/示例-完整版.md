# 智聊活动指令 - 解析示例文档（完整版）

## 📋 解析规则说明

### 核心默认规则
1. **不确定档位时** → 默认 `2000档`
2. **不确定折扣时** → 默认 `98折`
3. **无任何信息时** → 默认 `2000/98折`

---

## 🎯 场景一：完整格式（档位+折扣）

### 1.1 标准格式：xxxx/xx折
```
用户输入：申请一张3000/98折
解析结果：3000/98折
说明：完整格式，直接匹配
```

### 1.2 档位+折扣格式：xxxx档xx折
```
用户输入：2417257 河南名药师大药房连锁有限公司 申请一张3000档98折
解析结果：3000/98折
说明：提取"3000档98折"，标准化为"3000/98折"
```

### 1.3 多个完整格式
```
用户输入：申请1000档99折和3000档98折
解析结果：1000/99折, 3000/98折
说明：同时匹配多个完整格式
```

---

## 🎯 场景二：纯档位（默认98折）

### 2.1 单个档位
```
用户输入：1000谢谢
解析结果：1000/98折
说明：只提档位，默认98折
```

### 2.2 中文数字档位
```
用户输入：来张五千以上的98吧
解析结果：5000/98折
说明：识别中文"五千"，转换为5000
```

```
用户输入：三千的给一张
解析结果：3000/98折
说明：识别中文"三千"，默认98折
```

### 2.3 斜杠分隔多档位
```
用户输入：500/1000/2000
解析结果：500/98折, 1000/98折, 2000/98折
说明：斜杠分隔，每个档位默认98折
```

```
用户输入：各1000/2000
解析结果：1000/98折, 2000/98折
说明："各"字开头，斜杠分隔
```

### 2.4 逗号分隔多档位
```
用户输入：500，1000，2000
解析结果：500/98折, 1000/98折, 2000/98折
说明：中文逗号分隔
```

```
用户输入：500, 1000, 2000
解析结果：500/98折, 1000/98折, 2000/98折
说明：英文逗号分隔
```

### 2.5 空格分隔多档位
```
用户输入：500 1000 2000券
解析结果：500/98折, 1000/98折, 2000/98折
说明：空格分隔，带"券"字
```

```
用户输入：500 1000 2000各一张
解析结果：500/98折, 1000/98折, 2000/98折
说明：空格分隔，带"各一张"
```

### 2.6 复杂组合
```
用户输入：500，1000，2000，3000，5000各一张
解析结果：500/98折, 1000/98折, 2000/98折, 3000/98折, 5000/98折
说明：逗号分隔多档位，默认98折
```

---

## 🎯 场景三：纯折扣（默认2000档）

### 3.1 单个折扣
```
用户输入：发98
解析结果：2000/98折
说明：只提折扣，默认2000档
```

```
用户输入：送个98
解析结果：2000/98折
说明：只提折扣，默认2000档
```

```
用户输入：来个98
解析结果：2000/98折
说明：只提折扣，默认2000档
```

### 3.2 多个折扣
```
用户输入：送99折和98折
解析结果：2000/99折, 2000/98折
说明：多个折扣，都默认2000档
```

```
用户输入：99折和98折
解析结果：2000/99折, 2000/98折
说明：多个折扣，统一2000档
```

---

## 🎯 场景四：兜底默认值

### 5.1 无任何档位或折扣信息
```
用户输入：送券，多送点
解析结果：2000/98折
说明：无任何信息，兜底默认值
```

```
用户输入：2828274送券
解析结果：2000/98折
说明：只有门店ID，无档位折扣信息，兜底默认值
```

```
用户输入：海南益寿润康大药房有限公司送券
解析结果：2000/98折
说明：只有公司名，无档位折扣信息，兜底默认值
```

---

## 🎯 场景五：满减格式

### 6.1 减号格式
```
用户输入：2000-100
解析结果：2000/100折, 2000-100, 2000减100
说明：满减格式，生成多种表达
```

### 6.2 "减"字格式
```
用户输入：3000减150
解析结果：3000/150折, 3000-150, 3000减150
说明：满减格式，生成多种表达
```

---

## 🎯 场景六：混合场景

### 7.1 档位+折扣混合
```
用户输入：2000的给一张，10000的给一张
解析结果：2000/98折, 10000/98折
说明：提取多个档位，默认98折
```

```
用户输入：2000的一张，5000的一张，10000的一张
解析结果：2000/98折, 5000/98折, 10000/98折
说明：提取多个档位，默认98折
```

### 7.2 中文+阿拉伯数字混合
```
用户输入：五千、三千、1000各一张
解析结果：5000/98折, 3000/98折, 1000/98折
说明：同时识别中文和阿拉伯数字
```

---

## 📊 解析优先级

```
1. 完整格式（档位+折扣）
   ↓
2. 纯档位（默认98折）
   ↓
3. 纯折扣（默认2000档）
   ↓
4. 兜底默认值（2000/98折）
```

---

## ⚠️ 注意事项

1. **避免重复匹配**：如果已匹配完整格式（如"3000档98折"），不会再提取"3000"作为纯档位
2. **中文数字支持**：支持常见中文数字（一千、两千、三千、五千、一万等）
3. **多种分隔符**：支持斜杠、逗号、空格等多种分隔符
4. **容错性强**：即使用户输入不规范，也能返回合理的默认值

---

## 🎉 总结

智聊活动指令解析模块支持：
- ✅ 10+ 种输入格式
- ✅ 中文数字识别
- ✅ 智能默认值
- ✅ 兜底机制

让用户可以用最自然的语言申请优惠券！
